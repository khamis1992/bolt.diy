# ูุธุงู ุฅุฏุงุฑุฉ AI ุงูุชููุงุฆู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ูุธุงู ุฐูู ูุฅุฏุงุฑุฉ ูุฒูุฏู AI ุชููุงุฆูุงู ูุน ุงูุชุจุฏูู ุงูุชููุงุฆู ุจูู ุงููุฒูุฏูู ุญุณุจ ุชููุฑ ุงูุชูููุงุช ูุงูุญุตุต ุงููุฌุงููุฉ. ุงููุธุงู ูุนูู ุจุดูู ุดูุงู ุฏูู ุชุฏุฎู ุงููุณุชุฎุฏู.

## ุงููุฒูุฏูู ูุงูุฃููููุฉ

ุงููุธุงู ูุณุชุฎุฏู 3 ูุฒูุฏูู ุจุงูุชุฑุชูุจ ุงูุชุงูู:

### 1. OpenRouter (ุงูุฃููููุฉ ุงูุฃููู) ๐ฅ

**ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ:**
- `google/gemini-2.0-flash-thinking-exp:free` - ุงูุฃูุถู ููุจุฑูุฌุฉ ุงููุนูุฏุฉ
- `qwen/qwen-2.5-coder-32b-instruct` - ูุชุฎุตุต ูู ูุชุงุจุฉ ุงูููุฏ
- `google/gemini-flash-1.5` - ุณุฑูุน ูููุซูู
- `meta-llama/llama-3.1-405b-instruct:free` - ูุงูุฐุฉ ุณูุงู ูุจูุฑุฉ

**ุงููููุฒุงุช:**
- ููุงุฐุฌ ูุฌุงููุฉ ูููุฉ
- ุชููุน ูุจูุฑ ูู ุงูููุงุฐุฌ
- ุฌูุฏุฉ ุนุงููุฉ ูู ุงูุจุฑูุฌุฉ

**ุงูุงูุชูุงู ูููุฒูุฏ ุงูุชุงูู:**
- ุนูุฏ ุงุณุชููุงุฏ ุงูุญุตุฉ ุงููุฌุงููุฉ
- ุนูุฏ ุญุฏูุซ ุฎุทุฃ ูู ุงููุตุงุฏูุฉ
- ุจุนุฏ 5 ุฃุฎุทุงุก ูุชุชุงููุฉ

### 2. LongCat (ุงูุฃููููุฉ ุงูุซุงููุฉ) ๐ฅ

**ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ:**
- `gpt-4o-mini` - ุงููููุฐุฌ ุงูุงูุชุฑุงุถู
- `gpt-4o` - ููููุงู ุงููุนูุฏุฉ
- `claude-3-5-sonnet` - ุฌูุฏุฉ ุนุงููุฉ

**ุงููููุฒุงุช:**
- ุญุตุฉ ูุฌุงููุฉ ุณุฎูุฉ
- ุณุฑุนุฉ ุงุณุชุฌุงุจุฉ ุนุงููุฉ
- ููุซูููุฉ ุฌูุฏุฉ

**ุงูุงูุชูุงู ูููุฒูุฏ ุงูุชุงูู:**
- ุนูุฏ ุงุณุชููุงุฏ ุงูุญุตุฉ
- ุนูุฏ ุญุฏูุซ ุฃุฎุทุงุก ูุชูุฑุฑุฉ

### 3. DeepSeek (ุงูุงุญุชูุงุทู) ๐ฅ

**ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉ:**
- `deepseek-chat` - ูุญุงุฏุซุฉ ุนุงูุฉ
- `deepseek-coder` - ูุชุฎุตุต ูู ุงูุจุฑูุฌุฉ

**ุงููููุฒุงุช:**
- ุชูููุฉ ููุฎูุถุฉ ุฌุฏุงู ($0.0001 ููู 1K token)
- ุฌูุฏ ูู ุงูุจุฑูุฌุฉ ูุงูุฑูุงุถูุงุช
- ุงุญุชูุงุทู ููุซูู

## ุขููุฉ ุงูุนูู

### 1. ุงูุชุจุฏูู ุงูุชููุงุฆู

```
OpenRouter (ูุญุงููุฉ 1)
    โ (ูุดู/ุญุตุฉ ููุชููุฉ)
LongCat (ูุญุงููุฉ 2)
    โ (ูุดู/ุญุตุฉ ููุชููุฉ)
DeepSeek (ูุญุงููุฉ 3)
    โ (ูุดู)
ุฅุนุงุฏุฉ ุชุนููู ุฌููุน ุงููุฒูุฏูู ูุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู
```

### 2. ูุดู ุงูุฃุฎุทุงุก

ุงููุธุงู ููุชุดู ุชููุงุฆูุงู:
- **ุฃุฎุทุงุก ุงูุญุตุฉ**: `quota`, `rate limit`, `429`, `insufficient`
- **ุฃุฎุทุงุก ุงููุตุงุฏูุฉ**: `401`, `unauthorized`, `invalid api key`
- **ุฃุฎุทุงุก ุนุงูุฉ**: ูุชู ุชุณุฌูููุง ูุฒูุงุฏุฉ ุงูุนุฏุงุฏ

### 3. ุฅุนุงุฏุฉ ุงููุญุงููุฉ

- **ุนุฏุฏ ุงููุญุงููุงุช**: 3 ูุญุงููุงุช ูุญุฏ ุฃูุตู
- **ุงูุงูุชุธุงุฑ ุจูู ุงููุญุงููุงุช**: 1 ุซุงููุฉ ร ุฑูู ุงููุญุงููุฉ
- **ุฅุนุงุฏุฉ ุงูุชุนููู**: ุจุนุฏ 5 ุฃุฎุทุงุก ูุชุชุงููุฉ ููุฒูุฏ ูุงุญุฏ

## ุงููููุงุช ุงููููุดุฃุฉ

### 1. ูุธุงู ุงูุฅุฏุงุฑุฉ ุงูุฃุณุงุณู

**`app/lib/ai-provider-manager.ts`**
- ูุฏูุฑ ุงููุฒูุฏูู ุงูุฑุฆูุณู
- ููุทู ุงูุชุจุฏูู ุงูุชููุงุฆู
- ูุดู ุงูุฃุฎุทุงุก ูุฅุฏุงุฑุฉ ุงูุญุงูุฉ
- ุญุณุงุจ ุงูุชูููุฉ

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**
```typescript
// ุงูุญุตูู ุนูู ุงููุฒูุฏ ุงูุญุงูู
getCurrentProvider(): ProviderConfig | null

// ุนูู ุทูุจ ูุน ุงูุชุจุฏูู ุงูุชููุงุฆู
makeRequest(request: AIRequest): Promise<AIResponse>

// ุงูุญุตูู ุนูู ุฃูุถู ูููุฐุฌ
getBestModel(providerKey?: string): string

// ุงูุญุตูู ุนูู ุญุงูุฉ ุงููุฒูุฏูู
getProviderStatus(): Record<string, any>

// ุฅุฌุจุงุฑ ูุฒูุฏ ูุนูู (ููุงุฎุชุจุงุฑ)
forceProvider(providerKey: string): boolean
```

### 2. ุงูุชูุงูู ูุน ุงููุธุงู ุงูุญุงูู

**`app/lib/ai-provider-wrapper.ts`**
- ูุงุฌูุฉ ููุชูุงูู ูุน ูุธุงู LLM ุงูุญุงูู
- ุฅูุดุงุก ูุฒูุฏูู ูุชูุงูููู ูุน OpenAI SDK
- ุฏูุงู ูุณุงุนุฏุฉ

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**
```typescript
// ุงูุญุตูู ุนูู ุงููุฒูุฏ ุงูุชููุงุฆู
getAutoProvider(options?: AutoProviderOptions)

// ุนูู ุทูุจ AI ุชููุงุฆู
makeAutoAIRequest(messages: any[], options?: AutoProviderOptions)

// ุงูุญุตูู ุนูู ุญุงูุฉ ุงููุฒูุฏูู
getProviderStatus()

// ุฅุฌุจุงุฑ ูุฒูุฏ ูุนูู
forceProvider(providerKey: 'openrouter' | 'longcat' | 'deepseek')
```

**`app/lib/.server/llm/auto-stream-text.ts`**
- wrapper ูู stream-text ูุน ุงููุธุงู ุงูุชููุงุฆู
- ูุณุชุฎุฏู ูู streaming responses

### 3. API Endpoints

**`app/routes/api.auto-llm.ts`**
- API endpoint ููุทูุจุงุช ุงูุชููุงุฆูุฉ
- ูุฏุนู POST ููุทูุจุงุช ู GET ูุญุงูุฉ ุงููุฒูุฏูู

**ุงุณุชุฎุฏุงู:**
```typescript
// POST /api/auto-llm
{
  "messages": [...],
  "temperature": 0.7,
  "maxTokens": 4096,
  "stream": false,
  "projectId": "optional-project-id"
}

// GET /api/auto-llm
// ูุฑุฌุน ุญุงูุฉ ุฌููุน ุงููุฒูุฏูู
```

### 4. ุชุนุฏููุงุช ุงููุงุฌูุฉ

**`app/components/chat/ChatBox.tsx`**
- ุฅุฎูุงุก ModelSelector
- ุฅุถุงูุฉ ูุคุดุฑ ูููุธุงู ุงูุชููุงุฆู (ูุฎูู ุญุงููุงู)

**`app/.env.example`**
- ุฅุถุงูุฉ LongCat API Key
- ุชูุซูู ุงูููุงุชูุญ ุงููุทููุจุฉ

## ุงูุชูููู

### 1. ูุชุบูุฑุงุช ุงูุจูุฆุฉ

ูู ููู `.env.local`:

```env
# OpenRouter (Primary)
OPENROUTER_API_KEY=sk-or-v1c1eb6e2b912f8be579d20f3a9a7ebc35db678dfdaced61ec8a0926b4292f5bdd
OPEN_ROUTER_API_KEY=sk-or-v1c1eb6e2b912f8be579d20f3a9a7ebc35db678dfdaced61ec8a0926b4292f5bdd

# LongCat (Secondary)
LONGCAT_API_KEY=ak_1iP26u50m3pD9Cg1a77123Bo5OL95

# DeepSeek (Fallback)
DEEPSEEK_API_KEY=sk-472efaefda684958b9596e03f235789c
```

**ููุงุญุธุฉ:** ูุชู ูุฑุงุกุฉ ุงูููุงุชูุญ ูู:
1. `process.env` (Node.js)
2. `import.meta.env` (Vite)

### 2. ุชุฎุตูุต ุงูููุงุฐุฌ

ูุชุบููุฑ ุงูููุงุฐุฌ ุงููุณุชุฎุฏูุฉุ ุนุฏูู ูู `ai-provider-manager.ts`:

```typescript
this.providers.set('openrouter', {
  // ...
  models: [
    'your-preferred-model',
    'fallback-model',
  ],
  // ...
});
```

### 3. ุชุฎุตูุต ุงูุฃููููุฉ

ูุชุบููุฑ ุชุฑุชูุจ ุงููุฒูุฏููุ ุนุฏูู `priority`:

```typescript
this.providers.set('provider-name', {
  // ...
  priority: 1, // ุฃูู ุฑูู = ุฃููููุฉ ุฃุนูู
  // ...
});
```

## ุงูุงุณุชุฎุฏุงู

### ุงุณุชุฎุฏุงู ุชููุงุฆู (ููุตู ุจู)

ุงููุธุงู ูุนูู ุชููุงุฆูุงู ุฏูู ุชุฏุฎู:

```typescript
// ูู ุฃู ููุงู ูู ุงูุชุทุจูู
import { aiProviderManager } from '~/lib/ai-provider-manager';

const response = await aiProviderManager.makeRequest({
  messages: [
    { role: 'user', content: 'Write a React component' }
  ],
  temperature: 0.7,
  maxTokens: 2048,
});

console.log(response.provider); // "OpenRouter" ุฃู "LongCat" ุฃู "DeepSeek"
console.log(response.model); // ุงููููุฐุฌ ุงููุณุชุฎุฏู
console.log(response.content); // ุงูุฑุฏ
```

### ุงุณุชุฎุฏุงู ูุน Wrapper

```typescript
import { makeAutoAIRequest } from '~/lib/ai-provider-wrapper';

const response = await makeAutoAIRequest([
  { role: 'user', content: 'Explain async/await' }
], {
  temperature: 0.8,
  maxTokens: 1024,
});
```

### ุงุณุชุฎุฏุงู ุนุจุฑ API

```typescript
const response = await fetch('/api/auto-llm', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    messages: [
      { role: 'user', content: 'Hello!' }
    ],
    temperature: 0.7,
  }),
});

const data = await response.json();
```

### ูุญุต ุญุงูุฉ ุงููุฒูุฏูู

```typescript
import { getProviderStatus } from '~/lib/ai-provider-wrapper';

const status = getProviderStatus();
console.log(status);

// Output:
// {
//   openrouter: {
//     name: "OpenRouter",
//     isAvailable: true,
//     hasApiKey: true,
//     errorCount: 0,
//     priority: 1
//   },
//   longcat: { ... },
//   deepseek: { ... }
// }
```

### ุฅุฌุจุงุฑ ูุฒูุฏ ูุนูู (ููุงุฎุชุจุงุฑ)

```typescript
import { forceProvider } from '~/lib/ai-provider-wrapper';

// ุฅุฌุจุงุฑ ุงุณุชุฎุฏุงู LongCat
forceProvider('longcat');

// ุงูุทูุจุงุช ุงูุชุงููุฉ ุณุชุณุชุฎุฏู LongCat
```

## ุงููุฑุงูุจุฉ ูุงูุชุชุจุน

### Logs ูู Console

ุงููุธุงู ูุณุฌู ุชููุงุฆูุงู:

```
[AI Manager] Switched to provider: LongCat
[AI Manager] Provider OpenRouter marked as unavailable after 5 errors
[AI Manager] Reset all providers
[Auto Stream] Using provider: OpenRouter, model: google/gemini-2.0-flash-thinking-exp:free
```

### ุชุชุจุน ุงูุงุณุชุฎุฏุงู

ูุชู ุชุณุฌูู ุงูุงุณุชุฎุฏุงู ุชููุงุฆูุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

```typescript
// ูุชู ุชููุงุฆูุงู ูู api.auto-llm.ts
await logAIRequest(
  projectId,
  response.model,
  response.provider,
  response.tokensUsed,
  response.cost
);
```

### Dashboard

ูููู ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ูู Dashboard:

```typescript
import { loadUsageStats } from '~/lib/stores/usage';

await loadUsageStats();
// ุงูุฅุญุตุงุฆูุงุช ูุชุงุญุฉ ูู usageStore
```

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "No available AI providers"

**ุงูุญู:**
1. ุชุญูู ูู ูุฌูุฏ ุงูููุงุชูุญ ูู `.env.local`
2. ุชุฃูุฏ ูู ุตุญุฉ ุงูููุงุชูุญ
3. ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู

### ุงููุดููุฉ: ุงูุชุจุฏูู ุงููุณุชูุฑ ุจูู ุงููุฒูุฏูู

**ุงูุญู:**
1. ุงูุญุต logs ูู console
2. ุชุญูู ูู ุงูุญุตุต ุงููุชุจููุฉ
3. ุงุณุชุฎุฏู `getProviderStatus()` ููุญุต ุงูุญุงูุฉ

### ุงููุดููุฉ: ุฃุฎุทุงุก ูุชูุฑุฑุฉ

**ุงูุญู:**
1. ุงูุญุต `errorCount` ููู ูุฒูุฏ
2. ุงุณุชุฎุฏู `forceProvider()` ูุงุฎุชุจุงุฑ ูุฒูุฏ ูุนูู
3. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

### ุงููุดููุฉ: ุงุณุชุฌุงุจุงุช ุจุทูุฆุฉ

**ุงูุญู:**
1. ุงุณุชุฎุฏู ููุงุฐุฌ ุฃุณุฑุน (gemini-flash-1.5)
2. ููู `maxTokens`
3. ุงุณุชุฎุฏู streaming ููุงุณุชุฌุงุจุงุช ุงูุทูููุฉ

## ุงูุฃุฏุงุก

### ุงูุณุฑุนุฉ

- **OpenRouter**: ~2-5 ุซูุงู ููุงุณุชุฌุงุจุฉ
- **LongCat**: ~1-3 ุซูุงู ููุงุณุชุฌุงุจุฉ
- **DeepSeek**: ~2-4 ุซูุงู ููุงุณุชุฌุงุจุฉ

### ุงูุชูููุฉ

- **OpenRouter**: $0.00 (ููุงุฐุฌ ูุฌุงููุฉ)
- **LongCat**: $0.00 (ุญุตุฉ ูุฌุงููุฉ)
- **DeepSeek**: ~$0.0001 ููู 1K token

### ุงูููุซูููุฉ

- **ูุนุฏู ุงููุฌุงุญ**: >95% ูุน ุงูุชุจุฏูู ุงูุชููุงุฆู
- **ููุช ุงูุชุนุงูู**: <3 ุซูุงู ุนูุฏ ุงูุชุจุฏูู
- **ุงูุญุฏ ุงูุฃูุตู ูููุญุงููุงุช**: 3 ูุญุงููุงุช ร 3 ูุฒูุฏูู = 9 ูุญุงููุงุช

## ุงูุฃูุงู

### ุญูุงูุฉ ุงูููุงุชูุญ

- ุงูููุงุชูุญ ูุญููุธุฉ ูู `.env.local` (ุบูุฑ ูุฏููุน ูู Git)
- ูุง ูุชู ุฅุฑุณุงู ุงูููุงุชูุญ ูููุชุตูุญ
- ูุชู ูุฑุงุกุฉ ุงูููุงุชูุญ ูู server-side ููุท

### Rate Limiting

- ูุชู ุงุญุชุฑุงู ุญุฏูุฏ ุงููุฒูุฏูู
- ุงูุชุจุฏูู ุงูุชููุงุฆู ุนูุฏ ุงููุตูู ููุญุฏ
- ูุง ุชูุฌุฏ ูุญุงููุงุช ุฒุงุฆุฏุฉ

### Error Handling

- ุฌููุน ุงูุฃุฎุทุงุก ูุชู ุงูุชุนุงูู ูุนูุง ุจุดูู ุขูู
- ูุง ูุชู ูุดู ุชูุงุตูู ุญุณุงุณุฉ ูููุณุชุฎุฏู
- Logs ููุตูุฉ ูููุทูุฑูู ููุท

## ุงูุชุทููุฑ ุงููุณุชูุจูู

### ููุฒุงุช ูุฎุทุทุฉ

1. **Cache ููุงุณุชุฌุงุจุงุช**: ุชุฎุฒูู ุงูุงุณุชุฌุงุจุงุช ุงููุชูุฑุฑุฉ
2. **Load Balancing**: ุชูุฒูุน ุงูุทูุจุงุช ุจูู ุงููุฒูุฏูู
3. **A/B Testing**: ุงุฎุชุจุงุฑ ุฌูุฏุฉ ุงูููุงุฐุฌ ุงููุฎุชููุฉ
4. **User Preferences**: ุงูุณูุงุญ ูููุณุชุฎุฏููู ุจุงุฎุชูุงุฑ ุงููุฒูุฏ
5. **Analytics Dashboard**: ููุญุฉ ุชุญูู ููุฅุญุตุงุฆูุงุช ุงูููุตูุฉ

### ุชุญุณููุงุช ูุญุชููุฉ

1. **Retry Strategy**: ุงุณุชุฑุงุชูุฌูุฉ ุฃุฐูู ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
2. **Circuit Breaker**: ุฅููุงู ูุคูุช ูููุฒูุฏูู ุงููุงุดูุฉ
3. **Health Checks**: ูุญุต ุฏูุฑู ูุตุญุฉ ุงููุฒูุฏูู
4. **Fallback Models**: ููุงุฐุฌ ุงุญุชูุงุทูุฉ ููู ูุฒูุฏ
5. **Cost Optimization**: ุงุฎุชูุงุฑ ุงููููุฐุฌ ุงูุฃุฑุฎุต ุญุณุจ ุงููููุฉ

## ุงูุฎูุงุตุฉ

ุงููุธุงู ุงูุชููุงุฆู ูุฅุฏุงุฑุฉ AI ูููุฑ:

โ **ุชุฌุฑุจุฉ ุณูุณุฉ** - ูุง ุญุงุฌุฉ ูุงุฎุชูุงุฑ ุงููููุฐุฌ ูุฏููุงู  
โ **ููุซูููุฉ ุนุงููุฉ** - ุชุจุฏูู ุชููุงุฆู ุนูุฏ ุงููุดู  
โ **ุชูููุฉ ููุฎูุถุฉ** - ุงุณุชุฎุฏุงู ุงูููุงุฐุฌ ุงููุฌุงููุฉ ุฃููุงู  
โ **ุฌูุฏุฉ ููุชุงุฒุฉ** - ููุงุฐุฌ ูููุฉ ููุชุฎุตุตุฉ  
โ **ุณูููุฉ ุงูุตูุงูุฉ** - ููุฏ ููุธู ูููุซู  

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 17 ุฃูุชูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 1.0.0  
**ุงูุญุงูุฉ**: ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู โ

